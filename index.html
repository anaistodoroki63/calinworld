<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CÃ¢linWorld ðŸŒ¸</title>

<style>
body {
  font-family: 'Comic Sans MS', Arial, sans-serif;
  background: linear-gradient(135deg, #ffd6e8, #ffe4f2);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}
.container {
  background: white;
  padding: 25px;
  border-radius: 25px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
  text-align: center;
  width: 90%;
  max-width: 420px;
}
button {
  margin-top: 10px;
  border: none;
  padding: 12px 22px;
  border-radius: 20px;
  background: #ff69b4;
  color: white;
  font-size: 16px;
  cursor: pointer;
}
#googleLogin {
  margin: 15px 0;
}
</style>
</head>
<body>

<div class="container">

<h1>CÃ¢linWorld ðŸŒ¸</h1>
<p>Connecte-toi pour envoyer des cÃ¢lins kawaii ðŸ¤—</p>

<!-- Champ infos -->
<div id="userInfo"></div>

<!-- Conteneur Google -->
<div id="googleLogin"></div>

<!-- Bouton dÃ©connexion -->
<button id="logoutBtn" style="display:none;">Se dÃ©connecter</button>

</div>

<!-- Google Sign-In SDK -->
<script src="https://accounts.google.com/gsi/client" async defer></script>

<script>
let currentUser = null;

// â›” REMPLACE ICI PAR TON CLIENT ID GOOGLE
const GOOGLE_CLIENT_ID = "rjh19r5itlelhno0vgendabkjrh5tb8o.apps.googleusercontent.com";

function handleCredentialResponse(response) {
  const data = parseJwt(response.credential);
  currentUser = { name: data.name, email: data.email, picture: data.picture };
  renderUser();
}

function renderUser() {
  const userBox = document.getElementById("userInfo");
  const logoutBtn = document.getElementById("logoutBtn");
  const googleDiv = document.getElementById("googleLogin");

  if(currentUser) {
    userBox.innerHTML = `
      <img src="${currentUser.picture}" width="60" style="border-radius:50%;"><br>
      Bonjour ${currentUser.name} ðŸ’–<br>
      <small>${currentUser.email}</small>
    `;
    googleDiv.style.display = "none";
    logoutBtn.style.display = "inline-block";
  } else {
    userBox.innerHTML = "";
    logoutBtn.style.display = "none";
    googleDiv.style.display = "block";
    google.accounts.id.initialize({
      client_id: GOOGLE_CLIENT_ID,
      callback: handleCredentialResponse
    });
    google.accounts.id.renderButton(googleDiv, { theme: "outline", size: "large", width: 300 });
  }
}

function parseJwt(token) {
  return JSON.parse(atob(token.split('.')[1]));
}

document.getElementById("logoutBtn").onclick = () => {
  currentUser = null;
  renderUser();
};

window.onload = () => renderUser();
</script>

</body>
</html>
